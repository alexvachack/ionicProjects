<ion-header>
    <ion-toolbar no-border>
        <ion-buttons slot="start">
            <ion-back-button ></ion-back-button>
        </ion-buttons>

        <ion-title>Avatar</ion-title>

        <ion-buttons slot="end">
            <ion-avatar>
                <img src="/assets/img/chino.jpeg" alt="">
            </ion-avatar>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content>
    <div #map id="map" [hidden]="!user"></div>

    <div *ngIf="user">


        <ion-button expand="block" color="success" style="" (click)="startTracking()" *ngIf="!isTracking">
            <ion-icon name="locate" slot="start"></ion-icon>
            Iniciar Localizacion
        </ion-button>

        <ion-button expand="block" (click)="stopTracking()" *ngIf="isTracking">
            <ion-icon name="hand" slot="start"></ion-icon>
            Detener Localizacion
        </ion-button>



        <ion-list>
            <ion-item-sliding *ngFor="let pos of locations | async">
                <ion-item>
                    <ion-label text-wrap>

                        <ion-row>
                            <ion-chip color="success">
                                <ion-avatar>
                                    <img src="/assets/img/chino.jpeg" alt="">
                                </ion-avatar>
                                <ion-label>{{ user.uid }}</ion-label>
                            </ion-chip>
                        </ion-row>
                        <ion-row>
                            <ion-label>Latitud: {{ pos.lat }}</ion-label>
                        </ion-row>
                        <ion-row>
                            <ion-label> Longitud: {{ pos.lng }}</ion-label>
                        </ion-row>
                        <ion-row>
                            <ion-label> Fecha Registrada: {{ pos.timestamp | date:'short' }}</ion-label>
                        </ion-row>
                    </ion-label>

                </ion-item>

                <ion-item-options side="start">
                    <ion-item-option color="danger" (click)="deleteLocation(pos)">
                        <ion-icon name="trash" slot="icon-only"></ion-icon>

                    </ion-item-option>
                </ion-item-options>

            </ion-item-sliding>
        </ion-list>


    </div>
</ion-content>
